/**
 * @file config.h
 * @brief Конфигурация сервера
 * 
 * Определяет структуру ServerConfig для хранения параметров конфигурации
 * сервера и методы для их парсинга из аргументов командной строки.
 * 
 * Поддерживаемые параметры:
 * - порт сервера
 * - файл базы данных клиентов
 * - файл логов
 * 
 * @see config.cpp
 */

#ifndef CONFIG_H
#define CONFIG_H

#include <string>

/**
 * @brief Структура конфигурации сервера
 * 
 * Содержит все настраиваемые параметры сервера:
 * - путь к файлу базы данных клиентов
 * - путь к файлу логов
 * - порт для прослушивания подключений
 * 
 * @note Все поля имеют значения по умолчанию
 */
struct ServerConfig {
    std::string client_db_file = "/etc/vealc.conf"; ///< Файл базы данных клиентов
    std::string log_file = "/var/log/vealc.log";    ///< Файл логов сервера
    int port = 33333;                               ///< Порт сервера (по умолчанию 33333)
    
    /**
     * @brief Парсит аргументы командной строки
     * 
     * @param argc Количество аргументов
     * @param argv Массив аргументов
     * @return ServerConfig Заполненная структура конфигурации
     * 
     * @details
     * Поддерживаемые аргументы:
     * -h, --help      Показать справку
     * -p PORT         Установить порт сервера
     * -c, -d FILE     Указать файл конфигурации клиентов
     * -l FILE         Указать файл логов
     * 
     * @throw std::invalid_argument при неверном формате аргументов
     */
    static ServerConfig parse_args(int argc, char* argv[]);
    
    /**
     * @brief Выводит справку по использованию программы
     * 
     * Печатает в stdout информацию о доступных аргументах командной строки
     * и примерах использования.
     */
    static void print_help();
};

#endif // CONFIG_H
