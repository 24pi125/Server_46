/**
 * @file logger.h
 * @brief Класс для логирования
 * 
 * Определяет класс Logger для ведения журнала событий сервера.
 * Поддерживает запись логов в файл и вывод в консоль с различными
 * уровнями важности (критические/некритические ошибки).
 * 
 * Особенности:
 * - Автоматическое добавление временных меток
 * - Поддержка как полных строк, так и добавления к существующей строке
 * - Разделение на обычные логи и ошибки
 */

#ifndef LOGGER_H
#define LOGGER_H

#include <string>

/**
 * @brief Класс для ведения журнала событий
 * 
 * Предоставляет методы для логирования сообщений с временными метками
 * и уровнем важности. Поддерживает одновременную запись в файл и вывод в консоль.
 */
class Logger {
private:
    std::string log_file_;          ///< Путь к файлу логов
    std::string get_current_time(); ///< Получает текущее время в формате строки
    
public:
    /**
     * @brief Конструктор логгера
     * 
     * @param filename Путь к файлу для записи логов
     * 
     * @note Файл открывается в режиме добавления (append)
     */
    Logger(const std::string& filename);
    
    /**
     * @brief Записывает сообщение в лог
     * 
     * @param message Текст сообщения
     * @param critical Флаг критичности (по умолчанию false)
     * 
     * @details
     * Формат записи: [время] [уровень] сообщение
     * Выводит в консоль и записывает в файл
     */
    void log(const std::string& message, bool critical = false);
    
    /**
     * @brief Добавляет текст к последней записи лога
     * 
     * @param message Текст для добавления
     * 
     * @note Не добавляет временную метку и новую строку
     * @note Полезно для прогресс-баров или многострочных записей
     */
    void log_add(const std::string& message);
    
    /**
     * @brief Записывает сообщение об ошибке
     * 
     * @param error Текст ошибки
     * @param critical Флаг критичности (по умолчанию false)
     * 
     * @details
     * Добавляет префикс "err: " к сообщению
     * Использует тот же формат, что и log()
     */
    void log_error(const std::string& error, bool critical = false);
};

#endif // LOGGER_H
